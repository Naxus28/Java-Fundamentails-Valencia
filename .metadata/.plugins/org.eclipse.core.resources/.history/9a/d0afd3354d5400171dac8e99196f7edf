import java.util.List;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;

import javax.swing.JOptionPane;

/**
 * @author gabrielferraz
 *
 */
public class Todos {
	/**
	 * class variables
	 */
	static List<String> todos = new ArrayList<String>();
	static String todosFromUserInput;
	static String menuChoice;
	static final String inputTodosDirections = "Please input a list of todos. Separate each item by a comma";
	

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		todosFromUserInput = getTodosFromUserInput("Please input todos", "These are your todos: ");
		createTodosArray(todosFromUserInput);
		menuChoice = getUserChoiceFromMenu();
	
		if (menuChoice == "Add todo") {
			addTodo();
		} else if (menuChoice == "Delete todo") {
			deleteTodo();
		} else if (menuChoice == "Sort todos") {
			sortTodos();
		} else if (menuChoice == "Exit") {
			System.exit(1);
		}
		
	}
	
	private static String getTodosFromUserInput(String inputMsg, String todoMsg) {
		String todoListFromUser;
		
		do {
			todoListFromUser = JOptionPane.showInputDialog(inputTodosDirections);
			
			if (todoListFromUser.length() == 0) {
				JOptionPane.showMessageDialog(null, inputMsg, "Invalid Input", JOptionPane.ERROR_MESSAGE);
			} else {
				JOptionPane.showMessageDialog(null, todoMsg + todoListFromUser, "Todo List", JOptionPane.PLAIN_MESSAGE);
			}
		} while(todoListFromUser.length() == 0);
		
		return todoListFromUser;
	}
	
	private static String getUserChoiceFromMenu() {
		 String[] options = { "Add todo", "Delete todo", "Sort todos", "Exit" };
		 String selectedValue = (String) JOptionPane.showInputDialog(null, "Choose an action", "Input",
					JOptionPane.INFORMATION_MESSAGE, null,
					options, options[0]);
		 
		return selectedValue;
	}
	
	public static void showTodos() {
		JOptionPane.showMessageDialog(null, "These are your todos: " + todos, "Todo List", JOptionPane.PLAIN_MESSAGE);
	}
	
	private static void addTodo() {
		String newTodo = getTodosFromUserInput("Add a todo to the list: ", "This is the new todo: ");
		todos.add(newTodo);
		showTodos();
		getUserChoiceFromMenu();
	}
	
	private static void deleteTodo() {
		System.out.println("in delete");
		String [] todosArray = todos.toArray(new String[todos.size()]);
		String deletedTodo = (String) JOptionPane.showInputDialog(null, "Choose an action", "Input",
				JOptionPane.INFORMATION_MESSAGE, null,
				todosArray, todosArray[0]);
		
		todos.remove(deletedTodo);
		showTodos();
		getUserChoiceFromMenu();
	}
	
	private static void sortTodos() {
		System.out.println("todos: " + todos);
		Collections.sort(todos);
		System.out.println("todos: " + todos);
		String sortedTodos = "";
		String newline = System.getProperty("line.separator");
		
		for(String todo : todos) {
			sortedTodos += (newline + todo); 
		}
		
		JOptionPane.showMessageDialog(null, "These are your sorted todos: " + sortedTodos, "Todo List", JOptionPane.INFORMATION_MESSAGE);
	}	
	
	static private void createTodosArray(String todoListFromUser) {
		todos = new ArrayList<String>(Arrays.asList(todoListFromUser.split(",")));
	} 
}
