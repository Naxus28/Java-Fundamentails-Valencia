import java.text.DecimalFormat;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.swing.JOptionPane;

/**
 * @author gabrielferraz
 *
 */
public class LandEnclosure {
	
	/**
	 * format doubles to 2 decimal points
	 */
	final static DecimalFormat df = new DecimalFormat("#.00"); // use this variable to format two decimal points for all doubles

	/**
	 * @param args
	 */
	public static void main(String[] args) 
	{
		double sideMeasureUnit;
		double lenghtRatio;
		double widthRatio;
		String area;
		String areaInputDirections = "What is the area of the enclosure in square feet? Please input a number smaller than 1,000,000,000 and disregard the measurement unit sqft)";
		String ratioInputDirections = "What is the ratio L:W of the enclosure? Please input numbers smaller than 100.";
		String [] enclosureSides = new String [2];
		
		/**
		 * get area input
		 */
		do {
			area = JOptionPane.showInputDialog(areaInputDirections);
		}
		while(area.length() == 0 || Double.parseDouble(area) > 1000000000);
		
		/**
		 * get L:W input
		 */
		do {
			String ratio = JOptionPane.showInputDialog(ratioInputDirections);
			enclosureSides = getSides(ratio);
		}
		while( (enclosureSides[0] < 0 || enclosureSides[0] > 100) || (enclosureSides[1] < 0 || enclosureSides[1] > 100));
		
		sideMeasureUnit = getMeasureUnit(area, )
		
	}
	
	/**
	 * convenience method
	 * @param string
	 * @return
	 */
	static private double converStringToDouble(String string) 
	{
		return Double.parseDouble(string);
	}
	
	
	/**
	 * parse rectangle sides out of string input and create an array with them
	 * @param ratio
	 * @return
	 */
	static private String [] getSides(String ratio) 
	{
		Pattern p = Pattern.compile("\\d+"); // define regex to get numbers only
		Matcher numbers = p.matcher(ratio); // user matcher class to match regex in string
		String [] sides =  new String[2]; // initialize sides array to hold l and w
		int index = 0;
		
		while(numbers.find()) 
		{
			sides[index] = numbers.group();
			index++;
		}
		
		return sides;
	} 
	
	/**
	 * this method solves for the common unit of measurement used to calculate the L and W
	 * @param area
	 * @param lenghtRatio
	 * @param widthRatio
	 * @return
	 */
	static private String getMeasureUnit(String area, String lenghtRatio, String widthRatio) 
	{
		double measureUnit = Math.sqrt(converStringToDouble(area) / (converStringToDouble(lenghtRatio) * converStringToDouble(widthRatio)));
		
		return df.format(measureUnit);
	}
	
	
	/**
	 * Gets the rectangle W
	 * @param widthRatio
	 * @param sideMeasureUnit
	 * @return
	 */
	static private String getWidth(String widthRatio, String sideMeasureUnit) 
	{
		double width = converStringToDouble(widthRatio) * converStringToDouble(sideMeasureUnit);
		
		return df.format(width);
	}

}
